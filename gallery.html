<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Perfect Windows Solutions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Core CSS file -->
    <link rel="stylesheet" href="dist/photoswipe.css" />

    <!-- Skin CSS file (styling of UI - buttons, caption, etc.)
  In the folder of skin CSS file there are also:
  - .png and .svg icons sprite, 
  - preloader.gif (for browsers that do not support CSS animations) -->
    <link rel="stylesheet" href="dist/default-skin/default-skin.css" />

    <!-- Core JS file -->
    <script src="dist/photoswipe.min.js"></script>

    <!-- UI JS file -->
    <script src="dist/photoswipe-ui-default.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
      integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" type="text/css" media="screen" href="gallery.css" />

    <script src="data.js"></script>
  </head>

  <body>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
      <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
      <div class="pswp__bg"></div>

      <!-- Slides wrapper with overflow:hidden. -->
      <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
          <div class="pswp__top-bar">
            <!--  Controls are self-explanatory. Order can be changed. -->

            <div class="pswp__counter"></div>

            <button
              class="pswp__button pswp__button--close"
              title="Close (Esc)"
            ></button>

            <button
              class="pswp__button pswp__button--share"
              title="Share"
            ></button>

            <button
              class="pswp__button pswp__button--fs"
              title="Toggle fullscreen"
            ></button>

            <button
              class="pswp__button pswp__button--zoom"
              title="Zoom in/out"
            ></button>

            <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
            <!-- element will get class pswp__preloader--active when preloader is running -->
            <div class="pswp__preloader">
              <div class="pswp__preloader__icn">
                <div class="pswp__preloader__cut">
                  <div class="pswp__preloader__donut"></div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"
          >
            <div class="pswp__share-tooltip"></div>
          </div>

          <button
            class="pswp__button pswp__button--arrow--left"
            title="Previous (arrow left)"
          ></button>

          <button
            class="pswp__button pswp__button--arrow--right"
            title="Next (arrow right)"
          ></button>

          <div class="pswp__caption">
            <div class="pswp__caption__center"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="headA">
      <div style="float: left; margin: 10px">
        <span style="font-size: 18px">Perfect Windows Solutions</span>
      </div>
      <div style="float: right; margin: 10px">
        <a href="index.html" class="link_a"
          ><i class="fas fa-home"></i>&nbsp;Home</a
        >
      </div>
    </div>
    <div class="container"></div>

    <script>
      function initializeGallery(items) {
        // Initializing photoswipe library

        var pswpElement = document.querySelectorAll(".pswp")[0];
        /*
        var dim = { w: 600, h: 400 };

        var items = data.map((dat) => {
          return { src: dat.thumbnail, ...dim };
        });
        */

        // define options (if needed)
        var options = {
          // optionName: 'option value'
          // for example:
          index: 0, // start at first slide
        };

        // Initializes and opens PhotoSwipe
        var gallery = new PhotoSwipe(
          pswpElement,
          PhotoSwipeUI_Default,
          items,
          options
        );
        gallery.init();
      }

      function getThumbnail(data) {
        let thumbnail = document.createElement("div");
        let img = document.createElement("img");
        let caption = document.createElement("div");

        thumbnail.setAttribute("class", "thumbnail");
        img.setAttribute("class", "img-thumbnail image");
        img.setAttribute("src", data.thumbnail);
        caption.setAttribute("class", "caption");
        caption.innerHTML =
          '<p><i class="fa fa-map-marker" aria-hidden="true"></i>&emsp;' +
          data.title +
          "</p>";

        thumbnail.appendChild(img);
        thumbnail.appendChild(caption);

        return thumbnail;
      }

      var container = document.getElementsByClassName("container")[0];

      var rows =
        data.length % 3 === 0
          ? data.length / 3
          : (data.length - (data.length % 3)) / 3 + 1;

      for (let i = 0; i < rows; ++i) {
        let row = document.createElement("div");
        row.setAttribute("class", "row");
        for (let j = 0; j < 3; ++j) {
          let dat = data[i * 3 + j];
          if (!dat) continue;

          let col = document.createElement("div");
          col.setAttribute("class", "col-sm-4 imgContainer");

          col.appendChild(getThumbnail(dat));
          col.onclick = () => initializeGallery(dat.slides);

          row.appendChild(col);
        }
        container.appendChild(row);
      }
    </script>
  </body>
</html>
